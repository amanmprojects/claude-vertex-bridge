<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Galaxy Explorer - The Ultimate Space Experience</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #00f3ff;
            --secondary-color: #ff00ff;
            --accent-color: #ffff00;
            --bg-dark: #0a0e27;
            --bg-darker: #050816;
            --text-light: #ffffff;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg-darker);
            color: var(--text-light);
            overflow: hidden;
            perspective: 1000px;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        canvas {
            display: block;
        }

        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 15px 30px;
            display: flex;
            gap: 20px;
            align-items: center;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translate(-50%, -50px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        .navbar h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-right: 20px;
        }

        .nav-btn {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--text-light);
            padding: 8px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-btn:hover {
            background: var(--primary-color);
            color: var(--bg-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.4);
        }

        .nav-btn:active {
            transform: translateY(0);
        }

        /* Control Panel */
        .control-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            width: 300px;
            animation: slideInLeft 1s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .control-panel h3 {
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: #aaa;
        }

        .slider {
            width: 100%;
            margin: 10px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: var(--bg-dark);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px var(--primary-color);
        }

        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: none;
        }

        /* Planet Info Panel */
        .planet-info {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            width: 350px;
            max-height: 70vh;
            overflow-y: auto;
            animation: slideInRight 1s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .planet-info h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .planet-info h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .planet-stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .planet-stat:last-child {
            border-bottom: none;
        }

        .planet-stat label {
            color: #aaa;
        }

        .planet-stat span {
            color: var(--text-light);
            font-weight: 600;
        }

        /* Planet List */
        .planet-list {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            animation: fadeIn 1.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .planet-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .planet-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.3);
        }

        .planet-card.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        .planet-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .planet-card h4 {
            font-size: 0.9rem;
            margin-bottom: 5px;
            font-family: 'Orbitron', sans-serif;
        }

        .planet-card p {
            font-size: 0.75rem;
            color: #aaa;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, var(--bg-dark) 0%, var(--bg-darker) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 4px solid var(--glass-border);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--primary-color);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .planet-info {
                width: 300px;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
                gap: 10px;
                padding: 10px 20px;
            }

            .navbar h1 {
                font-size: 1.2rem;
                margin-right: 10px;
            }

            .control-panel {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
            }

            .planet-info {
                position: fixed;
                top: auto;
                bottom: 340px;
                right: 20px;
                left: 20px;
                width: auto;
                max-height: 40vh;
            }

            .planet-list {
                grid-template-columns: repeat(2, 1fr);
                max-width: 100%;
                left: 20px;
                right: 20px;
                bottom: 20px;
            }
        }

        @media (max-width: 480px) {
            .planet-list {
                grid-template-columns: 1fr;
            }
        }

        /* Additional Effects */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 1;
            }
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: var(--bg-dark);
            color: var(--text-light);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--primary-color);
            z-index: 10001;
        }

        .tooltip.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars-container"></div>

    <div id="canvas-container"></div>

    <div class="navbar">
        <h1>üöÄ GALAXY EXPLORER</h1>
        <button class="nav-btn" id="auto-rotate-btn">Auto Rotate</button>
        <button class="nav-btn" id="reset-camera-btn">Reset View</button>
        <button class="nav-btn" id="toggle-orbits-btn">Toggle Orbits</button>
        <button class="nav-btn" id="toggle-labels-btn">Toggle Labels</button>
    </div>

    <div class="control-panel">
        <h3>‚öôÔ∏è Controls</h3>
        <div class="control-group">
            <label>Rotation Speed</label>
            <input type="range" id="rotation-speed" class="slider" min="0" max="100" value="50">
        </div>
        <div class="control-group">
            <label>Camera Distance</label>
            <input type="range" id="camera-distance" class="slider" min="10" max="200" value="80">
        </div>
        <div class="control-group">
            <label>Particle Count</label>
            <input type="range" id="particle-count" class="slider" min="1000" max="20000" value="8000" step="1000">
        </div>
        <div class="control-group">
            <label>Planet Size</label>
            <input type="range" id="planet-size" class="slider" min="0.5" max="3" value="1" step="0.1">
        </div>
    </div>

    <div class="planet-info" id="planet-info">
        <h2>Solar System</h2>
        <h3>Explore Our Cosmic Neighborhood</h3>
        <p style="color: #aaa; line-height: 1.6;">
            Welcome to the Interactive Galaxy Explorer! Click on any planet to learn more about it.
            Use your mouse to rotate and zoom. Experience the beauty of our solar system in stunning 3D.
        </p>
    </div>

    <div class="planet-list" id="planet-list">
        <!-- Dynamically populated -->
    </div>

    <div class="loading-screen" id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Initializing Galaxy...</div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Global Variables
        let scene, camera, renderer, controls;
        let solarSystem, particles;
        let planets = [];
        let selectedPlanet = null;
        let autoRotate = false;
        let showOrbits = true;
        let showLabels = true;
        let starField;

        // Planet Data
        const planetData = [
            {
                name: 'Sun',
                type: 'Star',
                diameter: '1,392,700 km',
                distance: '0 km',
                temperature: '5,778 K',
                description: 'The Sun is the star at the center of our solar system. It is a nearly perfect sphere of hot plasma, providing the energy that sustains life on Earth.',
                color: 0xFDB813,
                size: 5,
                distance: 0,
                speed: 0
            },
            {
                name: 'Mercury',
                type: 'Terrestrial Planet',
                diameter: '4,879 km',
                distance: '57.9 million km',
                temperature: '440 K (167¬∞C)',
                description: 'Mercury is the smallest planet in our solar system and closest to the Sun. It has extreme temperature variations and a heavily cratered surface.',
                color: 0x8C7853,
                size: 0.8,
                distance: 15,
                speed: 4.74
            },
            {
                name: 'Venus',
                type: 'Terrestrial Planet',
                diameter: '12,104 km',
                distance: '108.2 million km',
                temperature: '737 K (464¬∞C)',
                description: 'Venus is the hottest planet in our solar system due to its thick atmosphere. It rotates backwards and is often called Earth\'s twin.',
                color: 0xFFC649,
                size: 0.95,
                distance: 20,
                speed: 3.5
            },
            {
                name: 'Earth',
                type: 'Terrestrial Planet',
                diameter: '12,742 km',
                distance: '149.6 million km',
                temperature: '288 K (15¬∞C)',
                description: 'Earth is the only known planet to harbor life. It has liquid water, a protective atmosphere, and a magnetic field that shields it from harmful radiation.',
                color: 0x4A90E2,
                size: 1,
                distance: 25,
                speed: 2.98
            },
            {
                name: 'Mars',
                type: 'Terrestrial Planet',
                diameter: '6,779 km',
                distance: '227.9 million km',
                temperature: '210 K (-63¬∞C)',
                description: 'Known as the Red Planet, Mars has the largest volcano and canyon in the solar system. It has polar ice caps and evidence of ancient water flows.',
                color: 0xC1440E,
                size: 0.53,
                distance: 30,
                speed: 2.41
            },
            {
                name: 'Jupiter',
                type: 'Gas Giant',
                diameter: '139,820 km',
                distance: '778.5 million km',
                temperature: '165 K (-108¬∞C)',
                description: 'Jupiter is the largest planet in our solar system. It has a Great Red Spot storm larger than Earth and over 75 known moons.',
                color: 0xC88B3A,
                size: 3,
                distance: 40,
                speed: 1.31
            },
            {
                name: 'Saturn',
                type: 'Gas Giant',
                diameter: '116,460 km',
                distance: '1.4 billion km',
                temperature: '134 K (-139¬∞C)',
                description: 'Saturn is famous for its spectacular ring system. It\'s a gas giant with over 80 moons, including Titan, which has a thick atmosphere.',
                color: 0xFAD5A5,
                size: 2.5,
                distance: 50,
                speed: 0.97
            },
            {
                name: 'Uranus',
                type: 'Ice Giant',
                diameter: '50,724 km',
                distance: '2.9 billion km',
                temperature: '76 K (-197¬∞C)',
                description: 'Uranus rotates on its side, likely due to an ancient collision. It has a faint ring system and 27 known moons.',
                color: 0x4FD0E7,
                size: 2,
                distance: 60,
                speed: 0.68
            },
            {
                name: 'Neptune',
                type: 'Ice Giant',
                diameter: '49,244 km',
                distance: '4.5 billion km',
                temperature: '72 K (-201¬∞C)',
                description: 'Neptune is the windiest planet with speeds reaching 2,100 km/h. It has 14 known moons, including Triton, which orbits backwards.',
                color: 0x4B70DD,
                size: 1.9,
                distance: 70,
                speed: 0.54
            },
            {
                name: 'Pluto',
                type: 'Dwarf Planet',
                diameter: '2,376 km',
                distance: '5.9 billion km',
                temperature: '44 K (-229¬∞C)',
                description: 'Pluto is a dwarf planet in the Kuiper Belt. It has a heart-shaped glacier and five known moons, the largest being Charon.',
                color: 0xF5A9B8,
                size: 0.3,
                distance: 80,
                speed: 0.4
            }
        ];

        // Initialize the application
        function init() {
            createScene();
            createLights();
            createSolarSystem();
            createParticles();
            createStarField();
            createControls();
            createPlanetList();
            createStarfieldBackground();
            animate();

            // Hide loading screen after initialization
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
            }, 2000);
        }

        function createScene() {
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x050816, 50, 200);

            camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.set(0, 40, 80);

            renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            window.addEventListener('resize', onWindowResize, false);
        }

        function createLights() {
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambientLight);

            // Point light from Sun
            const sunLight = new THREE.PointLight(0xffffff, 2, 300);
            sunLight.position.set(0, 0, 0);
            sunLight.castShadow = true;
            sunLight.shadow.mapSize.width = 2048;
            sunLight.shadow.mapSize.height = 2048;
            scene.add(sunLight);

            // Rim light
            const rimLight = new THREE.DirectionalLight(0x00f3ff, 0.5);
            rimLight.position.set(-50, 50, 50);
            scene.add(rimLight);
        }

        function createSolarSystem() {
            solarSystem = new THREE.Group();
            scene.add(solarSystem);

            planetData.forEach((data, index) => {
                const planet = createPlanet(data);
                planets.push(planet);
                solarSystem.add(planet);

                // Create orbit path
                if (data.distance > 0) {
                    const orbit = createOrbit(data.distance);
                    solarSystem.add(orbit);
                    planet.orbit = orbit;
                }

                // Create label
                const label = createLabel(data);
                scene.add(label);
                planet.label = label;
            });
        }

        function createPlanet(data) {
            const geometry = new THREE.SphereGeometry(data.size, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: data.color,
                shininess: 30,
                specular: 0x333333
            });

            const mesh = new THREE.Mesh(geometry, material);

            if (data.distance > 0) {
                mesh.position.x = data.distance;
            }

            mesh.castShadow = true;
            mesh.receiveShadow = true;
            mesh.userData = data;

            // Add ring for Saturn
            if (data.name === 'Saturn') {
                const ringGeometry = new THREE.RingGeometry(data.size * 1.2, data.size * 2, 64);
                const ringMaterial = new THREE.MeshPhongMaterial({
                    color: 0xF5A9B8,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.6
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2.5;
                mesh.add(ring);
            }

            // Add glow effect for the Sun
            if (data.name === 'Sun') {
                const sunGeometry = new THREE.SphereGeometry(data.size * 1.1, 32, 32);
                const sunMaterial = new THREE.MeshBasicMaterial({
                    color: data.color,
                    transparent: true,
                    opacity: 0.3
                });
                const sunGlow = new THREE.Mesh(sunGeometry, sunMaterial);
                mesh.add(sunGlow);
            }

            return mesh;
        }

        function createOrbit(distance) {
            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            const angles = [];

            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                const x = Math.cos(angle) * distance;
                const z = Math.sin(angle) * distance;
                vertices.push(x, 0, z);
                angles.push(angle);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const material = new THREE.LineBasicMaterial({
                color: 0x444444,
                transparent: true,
                opacity: 0.3
            });

            return new THREE.LineLoop(geometry, material);
        }

        function createLabel(data) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 64;

            context.fillStyle = 'rgba(10, 14, 39, 0.8)';
            context.fillRect(0, 0, canvas.width, canvas.height);

            context.strokeStyle = '#00f3ff';
            context.lineWidth = 2;
            context.strokeRect(0, 0, canvas.width, canvas.height);

            context.fillStyle = '#ffffff';
            context.font = 'bold 24px Orbitron';
            context.textAlign = 'center';
            context.fillText(data.name, canvas.width / 2, canvas.height / 2 + 8);

            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ map: texture });
            const sprite = new THREE.Sprite(material);
            sprite.scale.set(8, 2, 1);

            if (data.distance > 0) {
                sprite.position.set(data.distance + 2, data.size + 2, 0);
            } else {
                sprite.position.set(0, data.size + 3, 0);
            }

            return sprite;
        }

        function createParticles() {
            const particleCount = 8000;
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            const sizes = new Float32Array(particleCount);

            const color = new THREE.Color();

            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;

                positions[i3] = (Math.random() - 0.5) * 400;
                positions[i3 + 1] = (Math.random() - 0.5) * 400;
                positions[i3 + 2] = (Math.random() - 0.5) * 400;

                color.setHSL(Math.random(), 0.7, 0.5);
                colors[i3] = color.r;
                colors[i3 + 1] = color.g;
                colors[i3 + 2] = color.b;

                sizes[i] = Math.random() * 2;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            const material = new THREE.PointsMaterial({
                size: 2,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);
        }

        function createStarField() {
            const starCount = 500;
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(starCount * 3);

            for (let i = 0; i < starCount; i++) {
                const i3 = i * 3;
                positions[i3] = (Math.random() - 0.5) * 1000;
                positions[i3 + 1] = (Math.random() - 0.5) * 1000;
                positions[i3 + 2] = (Math.random() - 0.5) * 1000;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const material = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 4,
                transparent: true,
                opacity: 0.8
            });

            starField = new THREE.Points(geometry, material);
            scene.add(starField);
        }

        function createStarfieldBackground() {
            const starContainer = document.getElementById('stars-container');
            const starCount = 100;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starContainer.appendChild(star);
            }
        }

        function createControls() {
            // Mouse controls
            let isMouseDown = false;
            let mouseX = 0;
            let mouseY = 0;
            let targetRotationX = 0;
            let targetRotationY = 0;
            let rotationX = 0;
            let rotationY = 0;

            document.addEventListener('mousedown', (e) => {
                isMouseDown = true;
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            document.addEventListener('mousemove', (e) => {
                if (isMouseDown) {
                    const deltaX = e.clientX - mouseX;
                    const deltaY = e.clientY - mouseY;

                    targetRotationY += deltaX * 0.005;
                    targetRotationX += deltaY * 0.005;

                    targetRotationX = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, targetRotationX));

                    mouseX = e.clientX;
                    mouseY = e.clientY;
                }

                // Check for planet intersection
                checkPlanetIntersection(e.clientX, e.clientY);
            });

            document.addEventListener('mouseup', () => {
                isMouseDown = false;
            });

            document.addEventListener('wheel', (e) => {
                camera.position.z += e.deltaY * 0.05;
                camera.position.z = Math.max(10, Math.min(200, camera.position.z));
            });

            // Update rotation in animation loop
            function updateRotation() {
                rotationX += (targetRotationX - rotationX) * 0.05;
                rotationY += (targetRotationY - rotationY) * 0.05;

                solarSystem.rotation.x = rotationX;
                solarSystem.rotation.y = rotationY;

                requestAnimationFrame(updateRotation);
            }
            updateRotation();

            // Nav button events
            document.getElementById('auto-rotate-btn').addEventListener('click', () => {
                autoRotate = !autoRotate;
                const btn = document.getElementById('auto-rotate-btn');
                btn.textContent = autoRotate ? 'Stop Rotate' : 'Auto Rotate';
            });

            document.getElementById('reset-camera-btn').addEventListener('click', () => {
                camera.position.set(0, 40, 80);
                targetRotationX = 0;
                targetRotationY = 0;
            });

            document.getElementById('toggle-orbits-btn').addEventListener('click', () => {
                showOrbits = !showOrbits;
                planets.forEach(planet => {
                    if (planet.orbit) {
                        planet.orbit.visible = showOrbits;
                    }
                });
            });

            document.getElementById('toggle-labels-btn').addEventListener('click', () => {
                showLabels = !showLabels;
                planets.forEach(planet => {
                    if (planet.label) {
                        planet.label.visible = showLabels;
                    }
                });
            });

            // Slider controls
            document.getElementById('rotation-speed').addEventListener('input', (e) => {
                const value = e.target.value;
                planetData.forEach((data, index) => {
                    if (planets[index]) {
                        planets[index].userData.speedMultiplier = value / 50;
                    }
                });
            });

            document.getElementById('camera-distance').addEventListener('input', (e) => {
                const value = parseInt(e.target.value);
                camera.position.z = value;
            });

            document.getElementById('particle-count').addEventListener('input', (e) => {
                const value = parseInt(e.target.value);
                scene.remove(particles);
                createParticlesWithCount(value);
            });

            document.getElementById('planet-size').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                planets.forEach((planet, index) => {
                    if (planet.userData.name !== 'Sun') {
                        planet.scale.set(value, value, value);
                        if (planet.label) {
                            planet.label.position.y = planet.scale.y * planet.userData.size + 2;
                        }
                    }
                });
            });
        }

        function createParticlesWithCount(count) {
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);
            const sizes = new Float32Array(count);

            const color = new THREE.Color();

            for (let i = 0; i < count; i++) {
                const i3 = i * 3;

                positions[i3] = (Math.random() - 0.5) * 400;
                positions[i3 + 1] = (Math.random() - 0.5) * 400;
                positions[i3 + 2] = (Math.random() - 0.5) * 400;

                color.setHSL(Math.random(), 0.7, 0.5);
                colors[i3] = color.r;
                colors[i3 + 1] = color.g;
                colors[i3 + 2] = color.b;

                sizes[i] = Math.random() * 2;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            const material = new THREE.PointsMaterial({
                size: 2,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);
        }

        function checkPlanetIntersection(mouseX, mouseY) {
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(
                new THREE.Vector2(
                    (mouseX / window.innerWidth) * 2 - 1,
                    -(mouseY / window.innerHeight) * 2 + 1
                ),
                camera
            );

            const planetMeshes = planets.map(p => p);
            const intersects = raycaster.intersectObjects(planetMeshes);

            if (intersects.length > 0) {
                const planet = intersects[0].object;
                const data = planet.userData;
                showTooltip(mouseX, mouseY, data.name);

                if (selectedPlanet !== planet) {
                    if (selectedPlanet) {
                        selectedPlanet.material.emissive.setHex(0x000000);
                    }
                    selectedPlanet = planet;
                    planet.material.emissive.setHex(0x111111);
                    updatePlanetInfo(data);
                }
            } else {
                hideTooltip();
                if (selectedPlanet) {
                    selectedPlanet.material.emissive.setHex(0x000000);
                    selectedPlanet = null;
                }
            }
        }

        function showTooltip(x, y, text) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = text;
            tooltip.style.left = x + 10 + 'px';
            tooltip.style.top = y + 10 + 'px';
            tooltip.classList.add('show');
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.classList.remove('show');
        }

        function updatePlanetInfo(data) {
            const infoPanel = document.getElementById('planet-info');
            infoPanel.innerHTML = `
                <h2>${data.name}</h2>
                <h3>${data.type}</h3>
                <div class="planet-stat">
                    <label>Diameter:</label>
                    <span>${data.diameter}</span>
                </div>
                <div class="planet-stat">
                    <label>Distance from Sun:</label>
                    <span>${data.distance}</span>
                </div>
                <div class="planet-stat">
                    <label>Temperature:</label>
                    <span>${data.temperature}</span>
                </div>
                <p style="margin-top: 15px; color: #aaa; line-height: 1.6;">
                    ${data.description}
                </p>
            `;
        }

        function createPlanetList() {
            const listContainer = document.getElementById('planet-list');

            planetData.forEach((data, index) => {
                const card = document.createElement('div');
                card.className = 'planet-card';
                card.addEventListener('click', () => focusOnPlanet(planets[index]));

                const icon = document.createElement('div');
                icon.className = 'planet-icon';
                icon.style.background = `radial-gradient(circle at 30% 30%, #ffffff, ${getColorHex(data.color)})`;

                card.appendChild(icon);

                const name = document.createElement('h4');
                name.textContent = data.name;
                card.appendChild(name);

                const type = document.createElement('p');
                type.textContent = data.type;
                card.appendChild(type);

                listContainer.appendChild(card);
            });
        }

        function getColorHex(color) {
            return '#' + color.toString(16).padStart(6, '0');
        }

        function focusOnPlanet(planet) {
            const data = planet.userData;

            // Smooth camera transition
            const startPos = camera.position.clone();
            const endPos = new THREE.Vector3(
                data.distance * 0.3,
                data.size * 3 + 10,
                data.distance + 30
            );

            const startTime = Date.now();
            const duration = 2000;

            function animateCamera() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3);

                camera.position.lerpVectors(startPos, endPos, eased);
                camera.lookAt(planet.position);

                if (progress < 1) {
                    requestAnimationFrame(animateCamera);
                }
            }
            animateCamera();

            updatePlanetInfo(data);

            // Highlight selected card
            document.querySelectorAll('.planet-card').forEach((card, index) => {
                card.classList.remove('active');
                if (index === planetData.indexOf(data)) {
                    card.classList.add('active');
                }
            });
        }

        function animate() {
            requestAnimationFrame(animate);

            // Auto rotate
            if (autoRotate) {
                solarSystem.rotation.y += 0.005;
            }

            // Animate planets
            planets.forEach((planet, index) => {
                const data = planetData[index];
                if (data.speed > 0) {
                    const speed = data.speed * (planet.userData.speedMultiplier || 1);
                    planet.position.x = Math.cos(Date.now() * 0.001 * speed) * data.distance;
                    planet.position.z = Math.sin(Date.now() * 0.001 * speed) * data.distance;

                    if (planet.label) {
                        planet.label.position.x = planet.position.x + 2;
                        planet.label.position.y = planet.scale.y * data.size + 2;
                        planet.label.position.z = planet.position.z;
                    }

                    if (planet.orbit && showOrbits) {
                        planet.orbit.visible = true;
                    }
                }

                // Rotate planet on its axis
                planet.rotation.y += 0.01;
            });

            // Animate particles
            if (particles) {
                particles.rotation.y += 0.0005;
                particles.rotation.x += 0.0002;
            }

            // Animate star field
            if (starField) {
                starField.rotation.y += 0.0003;
            }

            camera.lookAt(0, 0, 0);
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Initialize the app when the page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>